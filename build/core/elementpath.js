KISSY.Editor.add("elementpath",function(f){function g(a){var b=null,c=null,e=[];for(a=a;a&&a[0];){if(a[0].nodeType==h.NODE_ELEMENT){if(!this.lastElement)this.lastElement=a;var d=a._4e_name();if(j.ie&&a[0].scopeName!="HTML")d=a[0].scopeName.toLowerCase()+":"+d;if(!c){if(!b&&k[d])b=a;if(l[d])if(!b&&d=="div"&&!m(a))b=a;else c=a}e.push(a);if(d=="body")break}a=a.parent()}this.block=b;this.blockLimit=c;this.elements=e}var i=KISSY,n=i.DOM,o=f.XHTML_DTD,h=f.NODE,j=i.UA,k={address:1,blockquote:1,dl:1,h1:1,
h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1},l={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},m=function(a){a=a[0]||a;a=a.childNodes;for(var b=0,c=a.length;b<c;b++){var e=a[b];if(e.nodeType==h.NODE_ELEMENT&&o.$block[e.nodeName.toLowerCase()])return true}return false};g.prototype={compare:function(a){var b=this.elements;a=a&&a.elements;if(!a||b.length!=a.length)return false;for(var c=0;c<b.length;c++)if(!n._4e_equals(b[c],a[c]))return false;return true},contains:function(a){for(var b=
this.elements,c=0;c<b.length;c++)if(b[c]._4e_name()in a)return b[c];return null}};f.ElementPath=g});

KISSY.Editor.add("clipboard",function(j){var c=KISSY.Editor,d=KISSY,n=d.Node,e=d.UA,o=c.Range,k=c.RANGE,l=d.Event;c.Paste||function(){function m(a){this.editor=a;this._init()}d.augment(m,{_init:function(){var a=this.editor;e.ie?l.on(a.document,"keydown",this._paste,this):l.on(a.document,"paste",this._paste,this)},_paste:function(a){if(!(a.type==="keydown"&&!(a.keyCode===86&&(a.ctrlKey||a.metaKey)))){var g=this.editor;a=g.document;var h=g.getSelection(),i=new o(a),b=new n(e.webkit?"<body></body>":
"<div></div>",null,a);e.webkit&&b[0].appendChild(a.createTextNode("\u00a0"));a.body.appendChild(b[0]);b.css({position:"absolute",top:h.getStartElement().offset().top+"px",width:"1px",height:"1px",overflow:"hidden"});b.css("left","-1000px");var p=h.createBookmarks();i.setStartAt(b,k.POSITION_AFTER_START);i.setEndAt(b,k.POSITION_BEFORE_END);i.select(true);setTimeout(function(){b.remove();var f;b=e.webkit&&(f=b._4e_first())&&f[0]&&f.hasClass("Apple-style-span")?f:b;h.selectBookmarks(p);g.insertHtml(b.html())},
0)}}});c.Paste=m}();j.addPlugin(function(){new c.Paste(j)})});

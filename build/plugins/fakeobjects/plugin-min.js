KISSY.Editor.add("fakeobjects",function(){var g=KISSY.Editor,i=KISSY,l=i.Node,m=g.NODE,k=g.HtmlParser,o=i.Editor,j=g.HtmlDataProcessor,n=j&&j.htmlFilter;g.FakeObjects||function(){var b={elements:{$:function(a){var c=a.attributes;if((c=(c=(c=c&&c._ke_realelement)&&new k.Fragment.FromHtml(decodeURIComponent(c)))&&c.children[0])&&a.attributes._ke_resizable){var d=a.attributes.style;if(d){var f=/(?:^|\s)width\s*:\s*(\d+)/i.exec(d);a=f&&f[1];d=(f=/(?:^|\s)height\s*:\s*(\d+)/i.exec(d))&&f[1];if(a)c.attributes.width=
a;if(d)c.attributes.height=d}}return c}}};n&&n.addRules(b);j&&i.mix(j,{createFakeParserElement:function(a,c,d,f){var e;e=new k.BasicWriter;a.writeHtml(e);e=e.getHtml();var h=a.attributes.style;if(a.attributes.width)h="width:"+a.attributes.width+"px;"+h;if(a.attributes.height)h="height:"+a.attributes.height+"px;"+h;a={"class":c,src:g.Config.base+"assets/spacer.gif",_ke_realelement:encodeURIComponent(e),_ke_real_node_type:a.type,style:h,align:a.attributes.align||""};if(d)a._ke_real_element_type=d;if(f)a._ke_resizable=
f;return new k.Element("img",a)}});g.FakeObjects=1}();i.augment(o,{createFakeElement:function(b,a,c,d,f){var e=b.attr("style")||"";if(b.attr("width"))e="width:"+b.attr("width")+"px;"+e;if(b.attr("height"))e="height:"+b.attr("height")+"px;"+e;b={"class":a,src:g.Config.base+"assets/spacer.gif",_ke_realelement:encodeURIComponent(f||b._4e_outerHtml()),_ke_real_node_type:b[0].nodeType,align:b.attr("align")||"",style:e};if(c)b._ke_real_element_type=c;if(d)b._ke_resizable=d;return new l("<img/>",b,this.document)},
restoreRealElement:function(b){if(b.attr("_ke_real_node_type")!=m.NODE_ELEMENT)return null;b=decodeURIComponent(b.attr("_ke_realelement"));var a=new l("<div>",null,this.document);a.html(b);return a._4e_first(function(c){return c[0].nodeType==m.NODE_ELEMENT})._4e_remove()}})});

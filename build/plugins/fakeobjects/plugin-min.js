KISSY.Editor.add("fakeobjects",function(g){var h=KISSY.Editor,i=KISSY,k=i.Node,l=h.NODE,j=h.HtmlParser,n=i.Editor,m=(g=g.htmlDataProcessor)&&g.htmlFilter,o={elements:{$:function(a){var b=a.attributes;if((b=(b=(b=b&&b._ke_realelement)&&new j.Fragment.FromHtml(decodeURIComponent(b)))&&b.children[0])&&a.attributes._ke_resizable){var c=a.attributes.style;if(c){var e=/(?:^|\s)width\s*:\s*(\d+)/i.exec(c);a=e&&e[1];c=(e=/(?:^|\s)height\s*:\s*(\d+)/i.exec(c))&&e[1];if(a)b.attributes.width=a;if(c)b.attributes.height=
c}}return b}}};m&&m.addRules(o);g&&i.mix(g,{createFakeParserElement:function(a,b,c,e){var f;f=new j.BasicWriter;a.writeHtml(f);f=f.getHtml();var d=a.attributes.style;if(a.attributes.width)d="width:"+a.attributes.width+"px;"+d;if(a.attributes.height)d="height:"+a.attributes.height+"px;"+d;a={"class":b,src:h.Config.base+"assets/spacer.gif",_ke_realelement:encodeURIComponent(f),_ke_real_node_type:a.type,style:d,align:a.attributes.align||""};if(c)a._ke_real_element_type=c;if(e)a._ke_resizable=e;return new j.Element("img",
a)}});i.augment(n,{createFakeElement:function(a,b,c,e,f){var d=a.attr("style")||"";if(a.attr("width"))d="width:"+a.attr("width")+"px;"+d;if(a.attr("height"))d="height:"+a.attr("height")+"px;"+d;a={"class":b,src:h.Config.base+"assets/spacer.gif",_ke_realelement:encodeURIComponent(f||a._4e_outerHtml()),_ke_real_node_type:a[0].nodeType,align:a.attr("align")||"",style:d};if(c)a._ke_real_element_type=c;if(e)a._ke_resizable=e;return new k("<img/>",a,this.document)},restoreRealElement:function(a){if(a.attr("_ke_real_node_type")!=
l.NODE_ELEMENT)return null;a=decodeURIComponent(a.attr("_ke_realelement"));var b=new k("<div>",null,this.document);b.html(a);return b._4e_first(function(c){return c[0].nodeType==l.NODE_ELEMENT})._4e_remove()}})});

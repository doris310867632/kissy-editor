KISSY.Editor.add("fakeobjects",function(){var f=KISSY.Editor,i=KISSY,l=i.Node,n=f.NODE,k=f.HtmlParser,o=i.Editor,j=f.HtmlDataProcessor,m=j&&j.htmlFilter;f.FakeObjects||function(){var b={elements:{$:function(a){var c=a.attributes;if((c=(c=(c=c&&c._ke_realelement)&&new k.Fragment.FromHtml(decodeURIComponent(c)))&&c.children[0])&&a.attributes._ke_resizable){var e=a.attributes.style;if(e){var d=/(?:^|\s)width\s*:\s*(\d+)/i.exec(e);a=d&&d[1];e=(d=/(?:^|\s)height\s*:\s*(\d+)/i.exec(e))&&d[1];if(a)c.attributes.width=
a;if(e)c.attributes.height=e}}return c}}};m&&m.addRules(b);j&&i.mix(j,{createFakeParserElement:function(a,c,e,d){var g;g=new k.BasicWriter;a.writeHtml(g);g=g.getHtml();var h=a.attributes.style;if(a.attributes.width)h="width:"+a.attributes.width+"px;"+h;if(a.attributes.height)h="height:"+a.attributes.height+"px;"+h;a={"class":c,src:f.Config.base+"assets/spacer.gif",_ke_realelement:encodeURIComponent(g),_ke_real_node_type:a.type,style:h,align:a.attributes.align||""};if(e)a._ke_real_element_type=e;if(d)a._ke_resizable=
d;return new k.Element("img",a)}});f.FakeObjects=1}();i.augment(o,{createFakeElement:function(b,a,c,e){var d=b.attr("style")||"";if(b.attr("width"))d="width:"+b.attr("width")+"px;"+d;if(b.attr("height"))d="height:"+b.attr("height")+"px;"+d;b={"class":a,src:f.Config.base+"assets/spacer.gif",_ke_realelement:encodeURIComponent(b._4e_outerHtml()),_ke_real_node_type:b[0].nodeType,align:b.attr("align")||"",style:d};if(c)b._ke_real_element_type=c;if(e)b._ke_resizable=e;return new l("<img/>",b,this.document)},
restoreRealElement:function(b){if(b.attr("_ke_real_node_type")!=n.NODE_ELEMENT)return null;return new l(decodeURIComponent(b.attr("_ke_realelement")),this.document)}})});
